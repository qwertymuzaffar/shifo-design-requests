<div class="bg-white rounded-xl">
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-xl font-semibold">{{ 'documentTypes.title' | transloco }}</h2>
    <button
      type="button"
      (click)="closeDialog()"
      class="text-gray-400 hover:text-gray-600 transition-colors"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <div class="mb-6">
    <label class="block text-sm font-medium text-gray-700 mb-2">
      {{ 'documentTypes.addNew' | transloco }}
    </label>
    <div class="flex gap-2">
      <input
        type="text"
        [formControl]="newTypeName"
        [placeholder]="'documentTypes.placeholder' | transloco"
        class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
      />
      <button
        type="button"
        (click)="addDocumentType()"
        [disabled]="newTypeName.invalid || isLoading()"
        class="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm font-medium"
      >
        <lucide-icon [img]="Plus" [size]="16"></lucide-icon>
        {{ 'documentTypes.add' | transloco }}
      </button>
    </div>
    @if (newTypeName.invalid && newTypeName.touched) {
      <p class="text-xs text-red-500 mt-1">
        {{ 'documentTypes.nameRequired' | transloco }}
      </p>
    }
  </div>

  <div class="border-t border-gray-200 pt-4">
    <h3 class="text-sm font-medium text-gray-700 mb-3">
      {{ 'documentTypes.existingTypes' | transloco }}
    </h3>

    @if (isLoading() && documentTypes().length === 0) {
      <div class="flex items-center justify-center py-8">
        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
      </div>
    } @else if (documentTypes().length === 0) {
      <p class="text-center text-gray-500 py-8 text-sm">
        {{ 'documentTypes.noTypes' | transloco }}
      </p>
    } @else {
      <div class="space-y-2 max-h-96 overflow-y-auto">
        @for (type of documentTypes(); track type.id) {
          <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
            <span class="text-sm text-gray-700 font-medium">{{ type.name }}</span>
            <button
              type="button"
              (click)="deleteDocumentType(type.id)"
              [disabled]="isDeleting() === type.id"
              class="text-red-500 hover:text-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
            >
              @if (isDeleting() === type.id) {
                <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-red-500"></div>
              } @else {
                <lucide-icon [img]="Trash2" [size]="16"></lucide-icon>
              }
            </button>
          </div>
        }
      </div>
    }
  </div>

  <div class="flex justify-end mt-6 pt-4 border-t border-gray-200">
    <button
      type="button"
      (click)="closeDialog()"
      class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium"
    >
      {{ 'documentTypes.close' | transloco }}
    </button>
  </div>
</div>
