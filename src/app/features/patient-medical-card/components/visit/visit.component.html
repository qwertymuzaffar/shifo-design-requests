<div class="bg-white rounded-xl shadow-lg p-4 sm:p-6">
  <div class="flex items-center justify-between mb-4 sm:mb-6">
    <div class="flex items-center space-x-2 sm:space-x-3">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-activity w-5 h-5 sm:w-6 sm:h-6 text-blue-600"
      >
        <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
      </svg>
      <h2 class="text-xl sm:text-2xl font-bold text-gray-800">{{ 'visits.title' | transloco }}</h2>
    </div>
  </div>
  <div class="space-y-3 sm:space-y-4">
    @for (appointment of appointments.value().data.appointments; track $index) {
      <div
      class="border rounded-lg p-3 sm:p-4 cursor-pointer transition-all hover:shadow-md border-gray-200"
    >
      <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0">
        <div class="flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
          <div class="flex items-center space-x-1.5 sm:space-x-2">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-calendar w-4 h-4 sm:w-5 sm:h-5 text-gray-400"
            >
              <path d="M8 2v4"></path>
              <path d="M16 2v4"></path>
              <rect width="18" height="18" x="3" y="4" rx="2"></rect>
              <path d="M3 10h18"></path></svg
            ><span class="text-sm sm:text-base font-medium text-gray-800">{{appointment.date}}</span>
          </div>
          <div class="flex items-center space-x-1.5 sm:space-x-2">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-clock w-4 h-4 sm:w-5 sm:h-5 text-gray-400"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline></svg
            ><span class="text-xs sm:text-sm text-gray-600">{{appointment.time}}</span>
          </div>
        </div>
        <span class="inline-flex items-center gap-1.5 sm:gap-2 text-xs px-2 sm:px-3 py-1 rounded-full"
              [ngClass]="{
                'bg-green-50 text-green-700 ring-1 ring-green-200': appointment.status === appointmentStatus.COMPLETED,
                'bg-red-50 text-red-700 ring-1 ring-red-200': appointment.status === appointmentStatus.CANCELLED,
                'bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200': appointment.status === appointmentStatus.SCHEDULED
                }">
                    <lucide-icon [img]="appointment.status === appointmentStatus.COMPLETED ? CheckCircle :
                                 appointment.status === appointmentStatus.CANCELLED ? XCircle : Clock"
                                 [size]="12"
                                 class="shrink-0 sm:w-3.5 sm:h-3.5"
                    ></lucide-icon>
                    <span class="text-xs">{{ appointment.status | statusTranslate }}</span>
        </span>
      </div>
      <div class="mt-2 sm:mt-3 grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4">
        <div class="flex items-center space-x-1.5 sm:space-x-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-user w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400"
          >
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle></svg
          ><span class="text-xs sm:text-sm text-gray-700">{{ 'visits.doctor' | transloco }}: {{appointment.doctor.fullName}}</span>
        </div>
      </div>
      <div class="mt-2 sm:mt-3">
        <div class="flex items-center space-x-1.5 sm:space-x-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-file-text w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400"
          >
            <path
              d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"
            ></path>
            <path d="M14 2v4a2 2 0 0 0 2 2h4"></path>
            <path d="M10 9H8"></path>
            <path d="M16 13H8"></path>
            <path d="M16 17H8"></path></svg
          ><span class="text-xs sm:text-sm text-gray-700">{{ 'visits.type' | transloco }}: {{appointment.type | typeTranslate}}</span>
        </div>
      </div>
    </div>
    } @empty {
            <div class="p-6 sm:p-8 text-center text-gray-500 text-xs sm:text-sm">
               {{ 'visits.noData' | transloco }}
            </div>
    }
  </div>
</div>
